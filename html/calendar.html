<!DOCTYPE html>
<html>
<head>
    <title>I MET - Calendar</title>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/navbar.css">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js"></script>
</head>
<body>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <nav class="top-nav">
        <div class="logo">
            <img src="../data/logo.png" alt="Logo" style="height: 40px;">
        </div>
        <div id="userNameDisplay"></div>
        <button class="menu-button" onclick="toggleMenu()">☰</button>
    </nav>
    <div class="menu" id="menu">
        <a href="calendar.html">Calendar</a>
        <a href="beds_meals.html">Beds & Meals</a>
        <a href="general_data.html">General Data</a>
    </div>

    <!-- Bouton déplacé au-dessus du calendrier -->
    <button id="declarerSejour">Déclarer un Séjour</button>

    <div id="calendar"></div>
    <button id="retourMois" style="display: none;">&lt; Vue Mois</button>

    <!-- Modal Popup -->
    <div id="modalPopup" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close" onclick="window.fermerModal()">&times;</span>
            <form id="presenceForm">
                <label for="dateDebut">J'arriverai le:</label>
                <input type="text" id="dateDebut" name="dateDebut"><br><br>

                <label for="repasDebut">Pour:</label>
                <select id="repasDebut" name="repasDebut">
                    <option value="dejeuner">le déjeuner</option>
                    <option value="diner">le dîner</option>
                    <option value="nuit">la nuit</option>
                </select><br><br>

                <label for="dateFin">Je repartirai le:</label>
                <input type="text" id="dateFin" name="dateFin"><br><br>

                <label for="repasFin">Après:</label>
                <select id="repasFin" name="repasFin">
                    <option value="petit-dejeuner">le petit-déjeuner</option>
                    <option value="dejeuner">le déjeuner</option>
                    <option value="diner">le dîner</option>
                </select><br><br>

                <button type="button" id="btnAjouterParticipants" onclick="window.ouvrirChoixParticipants()">Ajouter participants</button>
                <br>
                <label for="participants">Participants:</label>
                <div id="selectedParticipantsList"></div>
                
                <button type="button" onclick="window.sauvegarderPresence()">Valider</button>
                <button type="button" id="btnSupprimer" style="display:none;" onclick="window.supprimerEvenement()">Supprimer</button>
            </form>
            <div id="listeEvenements"></div>
        </div>
    </div>

    <div id="choixParticipants" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" onclick="fermerChoixParticipants()">&times;</span>
                <div id="participantCheckboxes">
                <!-- Les cases à cocher seront ajoutées dynamiquement ici -->
            </div>
            <button type="button" onclick="validerSelectionParticipants()">Sélectionner</button>
        </div>
    </div>

    <script type="module" src="../js/main.js"></script>
    <script>
        window.onload = function() {
            // Display user's name from session storage
            const userName = sessionStorage.getItem('userName');
            document.getElementById('userNameDisplay').textContent = userName;
        };
    
        function toggleMenu() {
            const menu = document.getElementById('menu');
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }
    </script>
</body>
</html>
